@{
    Layout = "~/Views/Shared/_Layout_Zomato.cshtml";
}
@using Zomato.BAL;
@using System.Data;
@model Zomato.Areas.User.Models.MenuPageModel;

<style>
    .img {
        width: 100%;
        height: 25rem;
        
    }

        .img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

    .flexc {
    }
</style>

<main class="main" id="main">

    <div class="container">
        <nav class="nav">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a asp-area="" asp-controller="User1" asp-action="UserIndex">Home</a></li>
                <li class="breadcrumb-item"><a asp-area="User" asp-controller="User" asp-action="Index" asp-route-cityid="@CV.CityID()" asp-route-cityname="@CV.CityName()">@CV.CityName()</a></li>
                <li class="breadcrumb-item active">@CV.RestaurantName()</li>
            </ol>
        </nav>
    </div>
    <br />
    <div class="container py-4">
        @foreach (DataRow dataRow in Model.Restaurants.Rows)
        {
            <div class="d-flex img">
                <div class="mx-2 w-100">
                    <img src="@dataRow["ImageUrl"]" />
                </div>
                <div class="flexc mx-2 ">
                    <div class="pb-2 h-50">
                        <img src="@dataRow["ImageUrl"]" />
                    </div>
                    <div class=" h-50">
                        <img src="@dataRow["ImageUrl"]" />
                    </div>
                </div>
            </div>
            <br />
            <div>
                <div>
                    <h1>@dataRow["Name"]</h1>
                    <h5>@dataRow["Address"]</h5>
                    <p>Opens at : @Convert.ToDateTime(dataRow["OpeningTime"]).ToString("t")  - @Convert.ToDateTime(dataRow["ClosingTime"]).ToString("t") </p>
                </div>
            </div>
        }
    </div>
    <div class="container">
        <h1>Menu</h1>
    </div>
    <br />
    <div class="container">

        @foreach (DataRow dr in Model.MenuList.Rows)
        {
            if (Convert.ToBoolean(dr["IsActive"]) == true)
            {
                <div class="card mb-3 ">
                    <div class="d-flex justify-content-between m-2">
                        <div class="row g-0 w-75">
                            <div class="col-md-2 p-2">
                                <img src=@dr["ImageUrl"] class="img-fluid rounded" alt="...">
                            </div>
                            <div class="col-md-10">
                                <div class="card-body">
                                    <div class="d-flex">
                                        <h5 class="card-title pb-0">@dr["ItemName"]</h5>
                                        <div class="ml-5">
                                            <span class="rating ">@dr["Rating"] <i class="fa fa-star"></i></span>
                                        </div>
                                    </div>

                                    <p>&#8377 @dr["Price"]</p>
                                    <p class="restricted-text">@dr["Description"]</p>

                                </div>


                            </div>

                        </div>
                        <div class="d-flex align-items-center">
                            <div class="pr-5">
                                @if (ViewBag.menuIds.Contains(Convert.ToInt32(dr["MenuID"])))
                                {
                                    <div class="quantity-container px-2">

                                        @foreach (DataRow row in Model.CartList.Rows)
                                        {

                                            if (Convert.ToInt32(row["MenuID"]) == Convert.ToInt32(dr["MenuID"]))
                                            {
                                                 <a asp-area="User" asp-controller="Cart" asp-action="DecrementQuantity" asp-route-menuid="@Convert.ToInt32(row["MenuID"])" asp-route-quantity="@Convert.ToInt32(row["Quantity"])" asp-route-returnUrl="@Url.ActionContext.HttpContext.Request.Path">
                                                    -
                                                </a>
                                                <div>
                                                    @row["Quantity"]
                                                </div>
                                                <a asp-area="User" asp-controller="Cart" asp-action="IncrementQuantity" asp-route-menuid="@Convert.ToInt32(row["MenuID"])" asp-route-quantity="@Convert.ToInt32(row["Quantity"])" asp-route-returnUrl="@Url.ActionContext.HttpContext.Request.Path">
                                                    +
                                                </a> 

                                                



                                            }

                                        }

                                    </div>

                                }
                                else
                                {
                                    <a asp-action="CartInsert" asp-area="User" asp-controller="Cart" asp-route-userid="@CV.UserID()" asp-route-menuid="@Convert.ToInt32(dr["MenuID"])">
                                        <button class="btn text-light" style="background-color:#FF2E2E">Add +</button>
                                    </a>

                                }
                            </div>
                        </div>
                    </div>
                </div>
            }

        }

    </div>


</main>

